{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "withdraw-modal",
  "type": "registry:component",
  "title": "Withdraw Modal",
  "description": "Modal dialog for withdrawing assets",
  "registryDependencies": [
    "button",
    "dialog",
    "input",
    "label"
  ],
  "files": [
    {
      "path": "registry/new-york/capital/withdraw-modal/withdraw-modal.tsx",
      "content": "\"use client\";\n\nimport { useCallback, useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Loader2 } from \"lucide-react\";\nimport { cn, formatTokenAmount } from \"@morpheus-ui/registry\";\n\ninterface WithdrawModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  stakedBalance: bigint;\n  decimals?: number;\n  symbol?: string;\n  onWithdraw?: (amount: bigint) => void;\n  loading?: boolean;\n}\n\nexport function WithdrawModal({\n  open,\n  onOpenChange,\n  stakedBalance,\n  decimals = 18,\n  symbol = \"MOR\",\n  onWithdraw,\n  loading = false,\n}: WithdrawModalProps) {\n  const [amount, setAmount] = useState(\"\");\n  const [error, setError] = useState<string | null>(null);\n\n  const handleAmountChange = useCallback((value: string) => {\n    const regex = /^\\d*\\.?\\d{0,18}$/;\n    if (regex.test(value) || value === \"\") {\n      setAmount(value);\n      setError(null);\n    }\n  }, []);\n\n  const handleMaxClick = useCallback(() => {\n    setAmount(formatTokenAmount(stakedBalance, decimals, 18));\n  }, [stakedBalance, decimals]);\n\n  const handleWithdraw = useCallback(() => {\n    if (!amount) {\n      setError(\"Please enter an amount\");\n      return;\n    }\n\n    const amountInWei = BigInt(Math.floor(parseFloat(amount) * Math.pow(10, decimals)));\n\n    if (amountInWei > stakedBalance) {\n      setError(\"Cannot withdraw more than staked balance\");\n      return;\n    }\n\n    if (amountInWei <= 0n) {\n      setError(\"Invalid amount\");\n      return;\n    }\n\n    onWithdraw?.(amountInWei);\n    onOpenChange(false);\n    setAmount(\"\");\n  }, [amount, decimals, onWithdraw, onOpenChange, stakedBalance]);\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>Withdraw from Capital Pool</DialogTitle>\n          <DialogDescription>\n            Withdraw your staked MOR tokens. This may trigger unstaking penalties.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"grid gap-4 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <Label>Staked Balance</Label>\n            <span className=\"font-mono text-sm\">\n              {formatTokenAmount(stakedBalance, decimals, 4)} {symbol}\n            </span>\n          </div>\n\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <Label htmlFor=\"withdraw-amount\">Amount</Label>\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={handleMaxClick}\n                disabled={loading}\n              >\n                Max\n              </Button>\n            </div>\n            <Input\n              id=\"withdraw-amount\"\n              type=\"text\"\n              value={amount}\n              onChange={(e) => handleAmountChange(e.target.value)}\n              placeholder=\"0.00\"\n              disabled={loading}\n              className={cn(error && \"border-destructive\")}\n            />\n            {error && (\n              <p className=\"text-sm text-destructive\">{error}</p>\n            )}\n          </div>\n\n          <p className=\"text-xs text-muted-foreground\">\n            Withdrawn tokens will be available after the unstaking period.\n          </p>\n        </div>\n\n        <DialogFooter>\n          <Button\n            variant=\"outline\"\n            onClick={() => onOpenChange(false)}\n            disabled={loading}\n          >\n            Cancel\n          </Button>\n          <Button\n            onClick={handleWithdraw}\n            disabled={loading || !amount}\n            variant=\"destructive\"\n          >\n            {loading ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                Withdrawing...\n              </>\n            ) : (\n              \"Withdraw\"\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}