{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "staking-form-card",
  "type": "registry:component",
  "title": "Staking Form Card",
  "description": "Complete staking form with balance display and transaction handling",
  "dependencies": [
    "wagmi",
    "lucide-react"
  ],
  "registryDependencies": [
    "use-mor-balances"
  ],
  "files": [
    {
      "path": "registry/new-york/staking-form-card/staking-form-card.tsx",
      "content": "\"use client\";\n\nimport { useCallback, useMemo, useState } from \"react\";\nimport { useAccount, useWriteContract, useWaitForTransactionReceipt } from \"wagmi\";\nimport { Loader2, TrendingUp } from \"lucide-react\";\nimport { cn, formatTokenAmount } from \"@morpheus-ui/registry\";\nimport { MAINNET_CONTRACTS } from \"@morpheus-ui/registry\";\nimport { useMorBalances } from \"../hooks/use-mor-balances/use-mor-balances\";\n\nconst STAKING_ABI = [\n  {\n    inputs: [\n      { name: \"amount\", type: \"uint256\" },\n    ],\n    name: \"stake\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\",\n  },\n] as const;\n\ninterface StakingFormCardProps {\n  className?: string;\n  chainId?: number;\n}\n\nexport function StakingFormCard({ className, chainId = 8453 }: StakingFormCardProps) {\n  const { address } = useAccount();\n  const contracts = MAINNET_CONTRACTS[chainId as keyof typeof MAINNET_CONTRACTS];\n  const { balances, formattedTotalBalance } = useMorBalances();\n\n  const [amount, setAmount] = useState(\"\");\n  const [error, setError] = useState<string | null>(null);\n\n  const { data: hash, isPending, writeContract } = useWriteContract();\n\n  const { isLoading: isConfirming, isSuccess } = useWaitForTransactionReceipt({\n    hash,\n  });\n\n  const balance = balances[chainId];\n\n  const handleAmountChange = useCallback((value: string) => {\n    // Only allow numbers with up to 18 decimals\n    const regex = /^\\d*\\.?\\d{0,18}$/;\n    if (regex.test(value) || value === \"\") {\n      setAmount(value);\n      setError(null);\n    }\n  }, []);\n\n  const handleMaxClick = useCallback(() => {\n    if (balance) {\n      setAmount(balance.formattedBalance);\n    }\n  }, [balance]);\n\n  const handleStake = useCallback(async () => {\n    if (!address || !amount || !contracts?.StakingRewards) {\n      setError(\"Please connect your wallet and enter an amount\");\n      return;\n    }\n\n    const amountInWei = Math.floor(parseFloat(amount) * 1e18);\n    if (amountInWei <= 0) {\n      setError(\"Invalid amount\");\n      return;\n    }\n\n    try {\n      writeContract({\n        address: contracts.StakingRewards,\n        abi: STAKING_ABI,\n        functionName: \"stake\",\n        args: [BigInt(amountInWei)],\n      });\n    } catch {\n      setError(\"Failed to submit transaction\");\n    }\n  }, [address, amount, contracts?.StakingRewards, writeContract]);\n\n  const isDisabled = isPending || isConfirming || !address;\n\n  return (\n    <div className={cn(\"rounded-lg border bg-card p-6 shadow-sm\", className)}>\n      <div className=\"flex items-center gap-2 mb-4\">\n        <div className=\"p-2 rounded-lg bg-primary/10\">\n          <TrendingUp className=\"h-5 w-5 text-primary\" />\n        </div>\n        <h3 className=\"font-semibold\">Stake MOR Tokens</h3>\n      </div>\n\n      <div className=\"space-y-4\">\n        {/* Balance Display */}\n        <div className=\"flex items-center justify-between text-sm\">\n          <span className=\"text-muted-foreground\">Available</span>\n          <span className=\"font-mono\">\n            {balance?.formattedBalance || \"0\"} MOR\n          </span>\n        </div>\n\n        {/* Amount Input */}\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between\">\n            <label htmlFor=\"stake-amount\" className=\"text-sm font-medium\">\n              Amount\n            </label>\n            <button\n              type=\"button\"\n              onClick={handleMaxClick}\n              className=\"text-xs text-primary hover:underline\"\n              disabled={isDisabled}\n            >\n              Max\n            </button>\n          </div>\n          <div className=\"relative\">\n            <input\n              id=\"stake-amount\"\n              type=\"text\"\n              value={amount}\n              onChange={(e) => handleAmountChange(e.target.value)}\n              placeholder=\"0.00\"\n              disabled={isDisabled}\n              className={cn(\n                \"w-full px-3 py-2 font-mono text-lg border rounded-lg\",\n                \"focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\",\n                \"disabled:bg-muted disabled:cursor-not-allowed\",\n                error && \"border-destructive\"\n              )}\n            />\n            <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground\">\n              MOR\n            </span>\n          </div>\n        </div>\n\n        {/* Error Message */}\n        {error && (\n          <p className=\"text-sm text-destructive\">{error}</p>\n        )}\n\n        {/* Success Message */}\n        {isSuccess && (\n          <p className=\"text-sm text-green-600\">\n            Stake successful!\n          </p>\n        )}\n\n        {/* Submit Button */}\n        <button\n          onClick={handleStake}\n          disabled={isDisabled || !amount}\n          className={cn(\n            \"w-full py-3 px-4 rounded-lg font-medium transition-all\",\n            \"focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2\",\n            \"disabled:opacity-50 disabled:cursor-not-allowed\",\n            \"bg-primary text-primary-foreground hover:bg-primary-hover\"\n          )}\n        >\n          {isPending ? (\n            <span className=\"flex items-center justify-center gap-2\">\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\n              Confirming...\n            </span>\n          ) : isConfirming ? (\n            <span className=\"flex items-center justify-center gap-2\">\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\n              Processing...\n            </span>\n          ) : (\n            \"Stake\"\n          )}\n        </button>\n\n        {/* Transaction Hash */}\n        {hash && (\n          <a\n            href={`https://basescan.org/tx/${hash}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"block text-xs text-muted-foreground hover:text-primary text-center\"\n          >\n            View transaction on Basescan\n          </a>\n        )}\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}